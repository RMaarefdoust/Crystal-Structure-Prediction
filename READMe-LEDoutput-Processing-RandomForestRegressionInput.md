# Data Processing for LED Model Predictions

This repository contains code to process data generated by an LED model. The script reads model predictions from a CSV file, processes these predictions by extracting and converting numerical values, and then saves the processed data to a new CSV file.

## Overview

The script performs the following tasks:

1. **Data Loading**: Reads data from a CSV file containing LED model predictions and related information.
2. **Data Processing**: Extracts numerical values from the predictions, replaces specific float values, and combines this data with existing values.
3. **Data Saving**: Saves the processed data to a new CSV file.

## Requirements

- `pandas`
- `numpy`
- `re` (Standard Python library)

You can install the required packages using pip:

```bash
pip install pandas numpy
```

## Usage

1. **Prepare the Data**:
   Ensure you have a CSV file named `test-lstm-led_8000.csv` in the same directory as the script. The CSV file should include the following columns:
   - `predicted_output-led`: Contains model predictions in a string format.
   - `atom_site_fract_x`, `atom_site_fract_y`, `atom_site_fract_z`: Numerical values representing actual data points.
   - `atom_site_type_symbol`: Symbolic representation of atom site types.

2. **Run the Script**:
   Execute the script using Python:

   ```bash
   python LEDoutput-process-RandomForestRegressioninput.py
   ```

   The script will:

   - Load data from `test-lstm-led_8000.csv`.
   - Process the predictions to extract and convert numerical values.
   - Save the processed data to a new CSV file named `test-lstm-led_8000_processed.csv`.

## Code Details

### Functions

- **`convert_to_float_list(num_str)`**: Converts a string of numbers into a list of floats.
- **`replace_specific_floats(num_list)`**: Replaces specific float values (0.5, 0.75, 0.25) with their original values if present.

### Processing Workflow

- **Extract Lists**: Uses regex to extract lists from the predictions.
- **Convert and Replace**: Converts extracted lists to floats and replaces specific values as needed.
- **Combine Data**: Combines processed predictions with existing data points.
- **Save Results**: Saves the combined data to a new CSV file.

## Example

Given an input CSV with:

| predicted_output-led | atom_site_fract_x | atom_site_fract_y | atom_site_fract_z | atom_site_type_symbol |
|----------------------|-------------------|-------------------|-------------------|-----------------------|
| "[1.0, 0.5, 0.25]"  | 0.2               | 0.3               | 0.4               | A                     |
| "[0.75, 0.25, 0.5]" | 0.5               | 0.6               | 0.7               | B                     |

The script will output a CSV with:

| Updated_x           | Updated_y          | Updated_z          | Real_x | Real_y | Real_z | Atom_site_type_symbol |
|---------------------|---------------------|---------------------|--------|--------|--------|-----------------------|
| [1.0, 0.5, 0.25]   | [1.0, 0.5, 0.25]   | [1.0, 0.5, 0.25]   | 0.2    | 0.3    | 0.4    | A                     |
| [0.75, 0.25, 0.5]  | [0.75, 0.25, 0.5]  | [0.75, 0.25, 0.5]  | 0.5    | 0.6    | 0.7    | B                     |

